name: ${{github.actor}} Testing

on:
  push: ${{main}}
  workflow_dispatch:
    inputs:
      why-run:
        description: 'Varf√∂r vill du k√∂ra workflowet?'
        default: 'Testing'
        required: false
        type: string

jobs:
  build:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest]
        version: [8.0, 7.0, 6.0]
        
    steps:
      - name: Checkout code
        uses: actions/checkout@v5
      
      - name: Send to Discord
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        uses: Ilshidur/action-discord@master
        with:
          args: |
            if[ ${{ github.event_name }} == 'workflow_dispatch' ]; then
              "‚ö†Ô∏è ${{ github.actor}} har k√∂rt ig√•ng ett workflow manuellt!"
              "Anledning: ${{inputs.why-run}}"
            else
              "En push har gjorts till ${{github.repository}} av ${{github.actor}}"
            fi
            
      - name: ü•∑ Setup .NET
        uses: actions/setup-dotnet@v5
        with:
          version: ${{matrix.version}}

      - name: üõ†Ô∏è Build
        continue-on-error: false
        run: dotnet build
        
      - name: ‚öóÔ∏èTest
        run: dotnet test
